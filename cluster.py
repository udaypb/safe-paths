# -*- coding: utf-8 -*-
"""
Created on Thu Nov 28 01:38:07 2019

@author: smpsh
"""


from sklearn.externals import joblib 
import sys
import numpy as np
import json

dic = json.loads(sys.argv[1])
# dic={
#     "0": [
#         "7",
#         "26",
#         "7",
#         "18",
#         "26",
#         "26",
#         "08A",
#         "5",
#         "08A",
#         "08A",
#         "17",
#         "08B",
#         "08A",
#         "04B",
#         "20",
#         "08B",
#         "08B",
#         "6",
#         "26",
#         "7",
#         "08B",
#         "15",
#         "14",
#         "26",
#         "04B",
#         "08B",
#         "7",
#         "08A",
#         "08A",
#         "15",
#         "14",
#         "08B",
#         "14",
#         "14",
#         "08A",
#         "26",
#         "08B",
#         "5",
#         "14",
#         "26",
#         "08A",
#         "6",
#         "08B",
#         "08B",
#         "08A",
#         "15",
#         "08B",
#         "04B",
#         "08B",
#         "15",
#         "08A",
#         "6",
#         "15",
#         "6",
#         "6",
#         "6",
#         "08B",
#         "08B",
#         "08B",
#         "26",
#         "08B",
#         "14",
#         "08B",
#         "08A",
#         "14",
#         "08B",
#         "08A",
#         "04A",
#         "6",
#         "10",
#         "6",
#         "14",
#         "08B",
#         "14",
#         "08A",
#         "14",
#         "6",
#         "08B",
#         "18",
#         "18",
#         "5",
#         "15",
#         "26",
#         "26",
#         "14",
#         "26",
#         "08B",
#         "26",
#         "18",
#         "08A",
#         "08A",
#         "04B",
#         "08B",
#         "15",
#         "08A",
#         "08A",
#         "24",
#         "15",
#         "6",
#         "26",
#         "6",
#         "15",
#         "26",
#         "04B",
#         "26",
#         "24",
#         "14",
#         "7",
#         "26",
#         "04B",
#         "26",
#         "7",
#         "08B",
#         "5",
#         "26",
#         "3",
#         "14",
#         "04A",
#         "6",
#         "14",
#         "15",
#         "26",
#         "08B",
#         "15",
#         "26",
#         "18",
#         "3",
#         "08A",
#         "7",
#         "5",
#         "20",
#         "7",
#         "14",
#         "5",
#         "14",
#         "08A",
#         "14",
#         "7",
#         "11",
#         "08A",
#         "08B",
#         "18",
#         "08B",
#         "04B",
#         "08A",
#         "15",
#         "08A",
#         "08B",
#         "14",
#         "6",
#         "04A",
#         "14",
#         "3",
#         "15",
#         "26",
#         "26",
#         "26",
#         "6",
#         "08A",
#         "26",
#         "04B",
#         "11",
#         "26",
#         "6",
#         "6",
#         "04A",
#         "08A",
#         "04A",
#         "26",
#         "08B",
#         "14",
#         "7",
#         "04B",
#         "6",
#         "18",
#         "26",
#         "26",
#         "08B",
#         "5",
#         "08A",
#         "08A",
#         "7",
#         "08B",
#         "08B",
#         "14",
#         "04A",
#         "08A",
#         "7",
#         "08B",
#         "6",
#         "15",
#         "14",
#         "04B",
#         "15",
#         "18",
#         "6",
#         "6",
#         "04A",
#         "08B",
#         "08B",
#         "18",
#         "11",
#         "08A",
#         "15",
#         "08A",
#         "11",
#         "04B",
#         "08B",
#         "26",
#         "08B",
#         "7",
#         "08A",
#         "08B",
#         "08A",
#         "26",
#         "6",
#         "24",
#         "5",
#         "15",
#         "04B",
#         "15",
#         "04B",
#         "26",
#         "04B",
#         "6",
#         "6",
#         "6",
#         "04B",
#         "6",
#         "04A",
#         "04B",
#         "7",
#         "08B",
#         "14",
#         "14",
#         "14",
#         "26",
#         "26",
#         "08B",
#         "26",
#         "08A",
#         "6",
#         "08A",
#         "18",
#         "08B",
#         "24",
#         "14",
#         "08B",
#         "08A",
#         "14",
#         "08B",
#         "08B",
#         "01A",
#         "5",
#         "14",
#         "14",
#         "08B",
#         "6",
#         "15",
#         "18",
#         "2",
#         "08A",
#         "6",
#         "04B",
#         "08B",
#         "08A",
#         "08A",
#         "3",
#         "26",
#         "15",
#         "14",
#         "24",
#         "6",
#         "26",
#         "6",
#         "14",
#         "7",
#         "14",
#         "14",
#         "26",
#         "04B",
#         "15",
#         "08B",
#         "04A",
#         "5",
#         "08B",
#         "3",
#         "14",
#         "04A",
#         "6",
#         "14",
#         "15",
#         "08B",
#         "08B",
#         "6",
#         "08B",
#         "18",
#         "26",
#         "11",
#         "7",
#         "6",
#         "20",
#         "7",
#         "3",
#         "04A",
#         "26",
#         "15",
#         "08B",
#         "26",
#         "11",
#         "08A",
#         "7",
#         "18",
#         "26",
#         "04B",
#         "08B",
#         "08B",
#         "08B",
#         "08B",
#         "14",
#         "6",
#         "24",
#         "6",
#         "08B",
#         "08B",
#         "14",
#         "26",
#         "18",
#         "5",
#         "08A",
#         "5",
#         "14",
#         "11",
#         "08B",
#         "14",
#         "14",
#         "08A",
#         "08B",
#         "6",
#         "08B",
#         "08A",
#         "14",
#         "11",
#         "7",
#         "04B",
#         "6",
#         "18",
#         "26",
#         "26",
#         "08B",
#         "5",
#         "08A",
#         "08A",
#         "7",
#         "08B",
#         "08A",
#         "08A",
#         "20",
#         "08A",
#         "08B",
#         "08B",
#         "6",
#         "08B",
#         "14",
#         "08A",
#         "08B",
#         "26",
#         "6",
#         "08B",
#         "04A",
#         "08A",
#         "08A",
#         "18",
#         "5",
#         "11",
#         "6",
#         "08A",
#         "26",
#         "04B",
#         "08B",
#         "6",
#         "14",
#         "26",
#         "08A",
#         "6",
#         "26",
#         "26",
#         "26",
#         "5",
#         "5",
#         "08B",
#         "6",
#         "15",
#         "15",
#         "15",
#         "14",
#         "6",
#         "6",
#         "6",
#         "04B",
#         "6",
#         "04A",
#         "26",
#         "08B",
#         "08B",
#         "6",
#         "26",
#         "14",
#         "26",
#         "08A",
#         "24",
#         "5",
#         "08A",
#         "6",
#         "14",
#         "08B",
#         "14",
#         "08B",
#         "08B",
#         "08B",
#         "18",
#         "26",
#         "08A",
#         "5",
#         "14",
#         "26",
#         "26",
#         "26",
#         "04B",
#         "08B",
#         "26",
#         "6",
#         "2",
#         "08A",
#         "04B",
#         "08B",
#         "6",
#         "3",
#         "08A",
#         "18",
#         "15",
#         "08B",
#         "14",
#         "08B",
#         "26",
#         "18",
#         "17",
#         "26",
#         "7",
#         "14",
#         "7",
#         "08B",
#         "04B",
#         "15",
#         "7",
#         "24",
#         "14",
#         "08B",
#         "3",
#         "14",
#         "04A",
#         "6",
#         "14",
#         "15",
#         "26",
#         "08B",
#         "6",
#         "08A",
#         "18",
#         "26",
#         "11",
#         "7",
#         "5",
#         "20",
#         "7",
#         "3",
#         "5",
#         "26",
#         "15",
#         "08B",
#         "26",
#         "11",
#         "08A",
#         "08B",
#         "18",
#         "26",
#         "08A",
#         "08B",
#         "6",
#         "14",
#         "08B",
#         "14",
#         "11",
#         "24",
#         "6",
#         "14",
#         "14",
#         "14",
#         "3",
#         "18",
#         "08B",
#         "08A",
#         "5",
#         "14",
#         "11",
#         "08B",
#         "6",
#         "14",
#         "08A",
#         "08B",
#         "6",
#         "04B",
#         "08A",
#         "14",
#         "7",
#         "7",
#         "04B",
#         "6",
#         "18",
#         "26",
#         "26",
#         "08A",
#         "5",
#         "08A",
#         "04B",
#         "17",
#         "08B",
#         "08A",
#         "04B",
#         "20",
#         "08B",
#         "7",
#         "6",
#         "26",
#         "7",
#         "14",
#         "08B",
#         "14",
#         "14",
#         "14",
#         "08A",
#         "26",
#         "08A",
#         "08A",
#         "15",
#         "14",
#         "15",
#         "14",
#         "08B",
#         "5",
#         "26",
#         "14",
#         "08A",
#         "04A",
#         "3",
#         "26",
#         "6",
#         "14",
#         "08B",
#         "08A",
#         "26",
#         "6",
#         "15",
#         "08B",
#         "15",
#         "7",
#         "04A",
#         "15",
#         "6",
#         "26",
#         "26",
#         "08B",
#         "08B",
#         "08B",
#         "26",
#         "08A",
#         "14",
#         "7",
#         "08A",
#         "08A",
#         "08A",
#         "08A",
#         "04A",
#         "08A",
#         "04A",
#         "08A",
#         "7",
#         "08B",
#         "14",
#         "24",
#         "08A",
#         "6",
#         "08B",
#         "08A",
#         "14",
#         "24",
#         "6",
#         "3",
#         "26",
#         "08B",
#         "6",
#         "14",
#         "26",
#         "14",
#         "08A",
#         "26",
#         "08B",
#         "08B",
#         "6",
#         "14",
#         "14",
#         "18",
#         "08B",
#         "14",
#         "18",
#         "26",
#         "24",
#         "14",
#         "14",
#         "26",
#         "24",
#         "14",
#         "26",
#         "26",
#         "6",
#         "26",
#         "15",
#         "08B",
#         "08A",
#         "14",
#         "3",
#         "14",
#         "04A",
#         "6",
#         "15",
#         "15",
#         "26",
#         "08B",
#         "5",
#         "6",
#         "18",
#         "3",
#         "08A",
#         "7",
#         "5",
#         "20",
#         "7",
#         "3",
#         "5",
#         "26",
#         "15",
#         "08B",
#         "26",
#         "11",
#         "08A",
#         "08B",
#         "18",
#         "26",
#         "6",
#         "11",
#         "15",
#         "14",
#         "08B",
#         "14",
#         "11",
#         "08B",
#         "14",
#         "3",
#         "26",
#         "11",
#         "3",
#         "18",
#         "08B",
#         "08A",
#         "5",
#         "5",
#         "11",
#         "7",
#         "6",
#         "14",
#         "04A",
#         "08B",
#         "17",
#         "7",
#         "04B",
#         "6",
#         "18",
#         "26",
#         "26",
#         "08A",
#         "5",
#         "08A",
#         "3",
#         "17",
#         "08B",
#         "08B",
#         "04B",
#         "20",
#         "08B",
#         "7",
#         "6",
#         "26",
#         "14",
#         "08B",
#         "04B",
#         "08A",
#         "15",
#         "3",
#         "26",
#         "08B",
#         "26",
#         "08B",
#         "15",
#         "6",
#         "5",
#         "26",
#         "08B",
#         "5",
#         "14",
#         "14",
#         "08B",
#         "26",
#         "3",
#         "6",
#         "26",
#         "14",
#         "08A",
#         "5",
#         "5",
#         "24",
#         "26",
#         "15",
#         "15",
#         "26",
#         "04A",
#         "04A",
#         "04B",
#         "14",
#         "08B",
#         "14",
#         "6",
#         "08B",
#         "26",
#         "26",
#         "14",
#         "08B",
#         "08B",
#         "6",
#         "08A",
#         "26",
#         "15",
#         "6",
#         "04A",
#         "08B",
#         "26",
#         "04B",
#         "14",
#         "24",
#         "26",
#         "08B",
#         "14",
#         "08A",
#         "14",
#         "26",
#         "26",
#         "15",
#         "14",
#         "6",
#         "14",
#         "08B",
#         "08B",
#         "04A",
#         "08A",
#         "26",
#         "6",
#         "7",
#         "26",
#         "14",
#         "14",
#         "7",
#         "08B",
#         "26",
#         "26",
#         "08A",
#         "24",
#         "18",
#         "04B",
#         "26",
#         "24",
#         "08A",
#         "26",
#         "01A",
#         "14",
#         "26",
#         "15",
#         "08B",
#         "14",
#         "14",
#         "6",
#         "14",
#         "04A",
#         "6",
#         "08B",
#         "26",
#         "26",
#         "08B",
#         "7",
#         "6",
#         "18",
#         "3",
#         "08A",
#         "14",
#         "5",
#         "20",
#         "7",
#         "7",
#         "5",
#         "14",
#         "15",
#         "11",
#         "26",
#         "11",
#         "08A",
#         "08B",
#         "18",
#         "26",
#         "26",
#         "08B",
#         "15",
#         "14",
#         "08B",
#         "14",
#         "11",
#         "14",
#         "7",
#         "3",
#         "26",
#         "11",
#         "3",
#         "18",
#         "08B",
#         "08A",
#         "08B",
#         "5",
#         "14",
#         "7",
#         "6",
#         "6",
#         "04A",
#         "08B"
#     ]
# }


code_encoder = joblib.load("./code_encoder.pkl")
cluster_model = joblib.load("./cluster_model.pkl")


result = {}
for i in dic:
   result[i] =  np.sum(cluster_model.predict(np.array(code_encoder.transform(dic[i])).reshape(-1,1)))

result = sorted(result.items(), key = lambda kv:(kv[1]))
#
#for i in result:
#    if(result[i]/len(dic[i]))<=10:
#        result[i] = 1
#    else:
#        result[i] = 0
final = []
for i in result:
    if i[1]/len(dic[i[0]])<10:
         final.append(1)
    else:
        final.append(0)
print(final)

# result = {}

# for i in dic:
#    result[i] =  np.mean(cluster_model.predict(np.array(code_encoder.transform(dic[i])).reshape(-1,1)))

# result = sorted(result.items(), key = lambda kv:(kv[1]))
# for i in result:
#     if(result[i])<=10:
#         result[i] = 1
#     else:
#         result[i] = 0
# print(result)